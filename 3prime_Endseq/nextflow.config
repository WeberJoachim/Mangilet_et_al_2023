singularity.autoMounts = true

executor {
    name = 'slurm'
    queueSize = 25
    pollInterval = '1 min'
    submitRateLimit = '10 sec'
    queue = 'rosa.p'
}

params{
    reads                   = false
    outdir                  = "results"
    latest_transcriptome    = "../atRTD3_29122021.fa"
    gene_types_araport11    = "../Araport11_functional_descriptions_20211231.txt"
    genome                  = "../TAIR10_chr_all.fas"
    pA_u1c                  = "proximal_pA_comp_rep_u1c.bed"
    pA_u170k                = "proximal_pA_comp_rep_u170k.bed"
   
}



process {
   
    withLabel: fastqc {
        cpus    = 4
        memory  = '8 GB' 
        time    = '6h'
	    queue   = 'rosa.p'
        container = '../fastqc-0.11.9-hdfd78af_1.sif'
    }

    
    withLabel: multiqc {
        cpus    = 2
        memory  = '8 GB'
        time    = '4h'
	    queue   = 'rosa.p'
        container = '../multiqc-1.13-pyhdfd78af_0.sif'
    }

    withName: trim_galore{
        cpus    = 15
        memory  = '64 GB'
        time    = '12h'
	    queue   = 'rosa.p'
        container = '../trim-galore-0.6.7-hdfd78af_0.sif'
    }

    withName: make_tRNA_rRNA_reference{
        cpus    = 4
        memory  = '8 GB'
        time    = '1h'
	    queue   = 'rosa.p'
        container = '../seqkit-2.3.1-h9ee0642_0.sif'
    }

    withName: hisat2_index{
        cpus    = 16
        memory  = '128 GB'
        time    = '12h'
	    queue   = 'rosa.p'
	    container = '../hisat2-2.2.1-h87f3376_4.sif'
    }

    withName: hisat2_align{
        cpus    = 16
        memory  = '128 GB'
        time    = '12h'
	    queue   = 'rosa.p'
        container = '../hisat2-2.2.1-h87f3376_4.sif'
    }

    withName: preprocess_genome{
        cpus = 1
        memory = '4 GB'
        time = '1h'
        queue = 'rosa.p'
	    container = '../seqkit-2.3.1-h9ee0642_0.sif'
    }

    withName: hisat2_index_genome{
        cpus    = 16
        memory  = '128 GB'
        time    = '12h'
	    queue   = 'rosa.p'
	    container = '../hisat2-2.2.1-h87f3376_4.sif'
    }

    withName: hisat2_genome_align{
        cpus    = 16
        memory  = '128 GB'
        time    = '12h'
	    queue   = 'rosa.p'
        container = '../hisat2-2.2.1-h87f3376_4.sif'
    }

    withName: sam_to_bam{
        cpus = 4
        memory = '16 GB'
        time = '8h'
        queue = 'rosa.p'
        container = '../samtools-1.9-h91753b0_8.sif'

    }

    withName: sort_and_index{
        cpus = 4
        memory = '32 GB'
        time = '8h'
        queue = 'rosa.p'
        container = '../samtools-1.9-h91753b0_8.sif'
    }

    
    withLabel: deeptools{
        cpus = 8
        memory = '64 GB'
        time = '12h'
        queue = 'rosa.p'
	    container = '../deeptools-3.5.1--py0.sif'
    }

    withLabel:  python {
        cpus        = 1
        memory      = '4 GB'
        time        = '1h'
        queue       = 'rosa.p'
        container   = '../python3_3.10.4.sif'
    }

    withLabel:  bedtools {
        cpus        = 1
        memory      = '4 GB'
        time        = '1h'
        queue       = 'rosa.p'
        container   = '../bedtools_2.31.1--hf5e1c6e_0.sif'
    }
}


singularity {
    enabled = true
    autoMounts = true
    runOptions  = '--bind .:/tmp'
}
